<!doctype html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Lending Protocol — 前端调试面板</title>
			<style>
				:root{--bg:#f7f9fb;--card:#ffffff;--accent:#2b6ef6}
				body { font-family: Inter, Arial, Helvetica, sans-serif; margin: 0; padding:24px; background:var(--bg); color:#222 }
				.container{max-width:980px;margin:0 auto}
				header{display:flex;align-items:center;gap:12px}
				h2{margin:0 0 12px 0}
				.card { background:var(--card); border:1px solid #e8eefc; padding:18px; border-radius:10px; margin-bottom:14px; box-shadow:0 1px 2px rgba(20,24,40,0.03)}
				label { display:block; margin-top:8px; font-weight:600; color:#374151 }
				input[type=text], input[type=number] { width:100%; padding:10px; box-sizing:border-box; margin-top:6px; border-radius:8px; border:1px solid #e6eef7 }
				button { padding:8px 12px; margin-top:10px; cursor:pointer; border-radius:8px; border:0; background:var(--accent); color:#fff }
				button.secondary{background:#6b7280}
				.row { display:flex; gap:12px; align-items:flex-start }
				.col { flex:1 }
				pre { background:#0b1220; color:#cfe8ff; padding:12px; overflow:auto; border-radius:8px }
				.muted{color:#6b7280;font-size:13px}
				.controls{display:flex;gap:10px;flex-wrap:wrap}
				.small{padding:6px 8px;border-radius:6px;font-size:13px}
			</style>
	</head>
	<body>
		<h2>简易 LendingPool 前端面板</h2>

			<div class="card">
			<div class="row">
				<div class="col">
					<label>合约地址 - LendingPool</label>
					<input id="poolAddress" placeholder="输入 LendingPool 合约地址" />
				</div>
				<div class="col">
					<label>代币地址 (token)</label>
					<input id="tokenAddress" placeholder="输入代币合约地址 (例如 TokenMock)" />
				</div>
			</div>
			<div style="margin-top:10px">
				<button id="connectBtn">连接钱包</button>
				<button id="loadBtn">加载市场 & 用户数据</button>
			</div>
		</div>

		<div id="marketCard" class="card" style="display:none">
			<h3>市场信息</h3>
			<div id="marketInfo"></div>
		</div>

		<div id="userCard" class="card" style="display:none">
			<h3>我的账户（以当前连接钱包为准）</h3>
			<div id="userInfo"></div>

					<h4>操作</h4>
					<div class="row">
						<div class="col card">
							<label>Deposit 金额 (token 单位)</label>
							<input id="depositAmount" type="number" />
							<div class="controls">
								<button id="depositBtn">Deposit</button>
								<input id="approveAmount" type="text" placeholder="approve 金额或留空=Max" style="width:200px" />
								<button id="approveBtn" class="small">Approve</button>
								<button id="approveMaxBtn" class="small secondary">Approve Max</button>
							</div>
						</div>
						<div class="col card">
							<label>Withdraw 金额</label>
							<input id="withdrawAmount" type="number" />
							<button id="withdrawBtn">Withdraw</button>
						</div>
					</div>

					<div class="row" style="margin-top:12px">
						<div class="col card">
							<label>Borrow 金额</label>
							<input id="borrowAmount" type="number" />
							<button id="borrowBtn">Borrow</button>
						</div>
						<div class="col card">
							<label>Repay 金额</label>
							<input id="repayAmount" type="number" />
							<div class="controls">
								<button id="repayBtn">Repay (为自己)</button>
								<button id="approveRepayBtn" class="small">Approve for Repay</button>
								<button id="approveRepayMaxBtn" class="small secondary">Approve Max</button>
							</div>
						</div>
					</div>
		</div>

		<div class="card">
			<h3>调试输出</h3>
			<pre id="log"></pre>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/ethers@5.8.0/dist/ethers.min.js"></script>
		<script src="app.js"></script>
	</body>
</html>
